# ulp-1-5

##  Note ulp.1.5
Check for most current general_guide.md and ulp1.5 md

## Get rust going on WSL

Clean Up
-- rm -f Cargo.lock
-- cargo clean

## Run the Bot
cargo run --bin ulp1_5

## Fireup anvil - optimism
anvil --fork-url https://mainnet.optimism.io/

cast send --rpc-url http://127.0.0.1:8545 --private-key <YOUR_ANVIL_PK> --create <BYTECODE_HEX_STRING>

## Compile from Huff
Install legacy Huff:
curl -L get.huff.sh | bash
source ~/.bashrc  # or ~/.zshrc
huffup             # installs the latest stableanvi huffc

Compile

## Make sure you are in the ulp-1.5 directory

* huffc ./contracts/ArbitrageExecutor.huff -b > ./build/deploy_v2_1_0.bin

Huff-Neo (todo)
../tools/huff-neo.exe UniV4Swapper.huff -r > ../build/uni_v4_swapper.bin --alt-main UNI_V4_SWAP

## to build folder (old techniques)
$hex = "60538060093d393df360043560243560443573ba12222222228d8ba445958a75a0704d566bf2c95af160643560843563a9059cbb5f52906020529160405260605ff173ba12222222228d8ba445958a75a0704d566bf2c95f5f5f5af1"
$bytes = for ($i = 0; $i -lt $hex.Length; $i += 2) { [Convert]::ToByte($hex.Substring($i, 2), 16) }
[IO.File]::WriteAllBytes("build\flash_executor.bin", $bytes)

Bytecode saved successfully to build\flash_executor.bin using Huff-Neo output!

$hex = "60018060093d393df300"
$bytes = for ($i = 0; $i -lt $hex.Length; $i += 2) { [Convert]::ToByte($hex.Substring($i, 2), 16) }
[IO.File]::WriteAllBytes("build\simple_arb.bin", $bytes)


## Ready to test deploy?
cast send --rpc-url http://127.0.0.1:8545 --private-key <YOUR_ANVIL_PK> --create <BYTECODE_HEX_STRING>
ex:
cast send --rpc-url http://127.0.0.1:8545 --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 --create 335f550061058080600e3d393df35f3560e01c8063f3f18ace14610029578063fa461e331461049357806301e3b41a14610521575f5ffd5b602435602001355f52604435602001356020526004356020013560405260643580602401358060440135905080606401359050806084013590508060a4013590508060c4013590508060e401359050505f517fdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddda1826101475783156100c75778014614467034852101032872730522039888223787239703426100d1565b6442951287396001015b6040516080528260806020015263022c0d9f61010052306101006004015261010060240184525f5161010060440152610100606401905260a061010060840152604061010060a4015260805161010060c4015260806020015161010060e40152965f5f6101046101005f905af11561051a6101f7565b831561015f578460405160c06020015260c0525661016d5b6040518460c06020015260c0525b6338ed1739610100525f51610100600401525f6101006024015230610100606401524261010060840152600261010060a4015260c05161010060c4015260c06020015161010060e4015260a061010060440152965f5f6101246101005f905af11561051a6370a0823161010052306101006004015260205f60246101005f83fa1561051a5f516060525b6060517fdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddda1509350816102cc578215801561024b577801461446703485210103287273052203988822378723970342610255565b6442951287396001015b6040516080528560806020015263022c0d9f610100523061010060040152610100602401805260605161010060440152610100606401905260a061010060840152604061010060a4015260805161010060c4015260806020015161010060e40152955f5f6101046101005f905af11561051a61035a565b821580156102e6576040518460c06020015260c052566102f45b8460405160c06020015260c0525b6338ed173961010052606051610100600401525f6101006024015230610100606401524261010060840152600261010060a4015260c05161010060c4015260c06020015161010060e4015260a061010060440152905f5f6101246101005f905af11561051a5b505050506370a08231610100523061010060040152602060e060246101005f604051fa1561051a60e0516020515f5101807fdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddda1817fdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddda11115610442576020515f510163095ea7b36101005273ba12222222228d8ba445958a75a0704d566bf2c96101006004015261010060240190525f5f60446101005f6040515af11561051a7fa157427a8d45e187257fa91ff98f73367a3e04075e180055503bf726067157a95f5260205ff35b60e0517fdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddda16020515f51017fdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddda15f5ffd5b600435602435805f116104d8575f9003906060526044356024013563a9059cbb61010052336101006004015261010060240190525f5f60446101005f905af11561051a005b606052805f11610518575f90036044356024016020013563a9059cbb61010052336101006004015261010060240190525f5f60446101005f905af11561051a5b005b1515575f5ffd5b335f541461052d575f5ffd5b6004356024356370a0823161010052306101006004015260205f60246101005f82fa1561051a5f5163a9059cbb6101005290916101006004015290610100602401525f5f60446101005f905af11561051a00

## Success?
Deployed Contract Address: 0x70E5370b8981Abc6e14C91F4AcE823954EFC8eA3
blockHash            0x091cf43d3d9fac2ed79a674d07ba85e2f392b0e4aa54c9c1c1bfd1f3fe5c1eca
blockNumber          134418130
contractAddress      0x70E5370b8981Abc6e14C91F4AcE823954EFC8eA3
cumulativeGasUsed    86432
effectiveGasPrice    1419452
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              86432
root
status               1 (success)
transactionHash      0x7cf535cf6f9b4939f36b5ca44f998de325f11fcb1b4ced4bde0fdd1fbd64dc34
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
authorizationList
